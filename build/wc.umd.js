var Q=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(i,s,o)=>s in i?Q(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o,j=(i,s)=>{for(var o in s||(s={}))T.call(s,o)&&C(i,o,s[o]);if(m)for(var o of m(s))O.call(s,o)&&C(i,o,s[o]);return i},w=(i,s)=>X(i,Y(s));var N=(i,s)=>{var o={};for(var u in i)T.call(i,u)&&s.indexOf(u)<0&&(o[u]=i[u]);if(i!=null&&m)for(var u of m(i))s.indexOf(u)<0&&O.call(i,u)&&(o[u]=i[u]);return o};var p=(i,s,o)=>(C(i,typeof s!="symbol"?s+"":s,o),o),R=(i,s,o)=>{if(!s.has(i))throw TypeError("Cannot "+o)};var P=(i,s,o)=>(R(i,s,"read from private field"),o?o.call(i):s.get(i)),k=(i,s,o)=>{if(s.has(i))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(i):s.set(i,o)},F=(i,s,o,u)=>(R(i,s,"write to private field"),u?u.call(i,o):s.set(i,o),o);(function(i,s){typeof exports=="object"&&typeof module!="undefined"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis!="undefined"?globalThis:i||self,s(i.WebComponent={}))})(this,function(i){var d;"use strict";function s(e,n){var f=n,{children:t=[]}=f,r=N(f,["children"]);return typeof e=="function"?e(t):{isComponent:!0,type:e,children:Array.isArray(t)?t:[t],props:r}}function o(e){return{isFragment:!0,children:Array.isArray(e)?e:[e]}}function u(e){return(Array.isArray(e)?e:[e]).reduce((t,r)=>[...t,...r.isFragment?r.children:[r]],[])}function W(e){return[].slice.call(e.childNodes).reduce((t,r)=>(r.nodeName==="#text"&&(r.nodeValue||"").trim().length===0||t.push(r),t),[])}function M(e,t,r,n){for(let f=0;f<t.length;f++){const c=t[f];if(!r.includes(c)&&("localName"in c&&c.localName===n.type||(c==null?void 0:c.nodeName)==="#text"&&!n.type))return[c,f===e?"complete":"partial"]}return[n.type?document.createElement(n.type):document.createTextNode(""),"new"]}function V(e,t){t===null?e.removeAttribute("class"):Array.isArray(t)?e.classList.add(...t):e.classList.add(...t.split(" "))}function $(e,t){if(!!t)for(const r in g.get(e)||{})r in t||e.removeAttribute(r)}function q(e,t){e.removeAttribute("style"),t!==null&&Object.assign(e.style,t)}function D(e,t,r){const n=e.getAttribute(t);r===null?e.removeAttribute(t):String(r)!==String(n)&&e.setAttribute(t,r)}const g=new WeakMap;function x(e){return e?Object.keys(e).filter(t=>t.startsWith("on")).reduce((t,r)=>w(j({},t),{[r.replace("on","").toLowerCase()]:e[r]}),{}):{}}function G(e,t){const r=x(t);!r||Object.keys(r).forEach(n=>{e.removeEventListener(n,r[n])})}function _(e,t){G(e,g.get(e));const r=x(t);!r||Object.keys(r).forEach(n=>{e.addEventListener(n,r[n])})}function H(e,t){t=t||{},_(e,t),g.set(e,t)}function v(e,t){t=t||{},$(e,t),_(e,t),Object.keys(t).forEach(r=>{const n=t[r];r.startsWith("on")||(r==="class"?V(e,n):r==="style"?q(e,n):D(e,r,n))}),g.set(e,t)}function b(e,t){var f;t=u(t);const r=W(e),n=[];for(let c=0;c<t.length;c++){const a=t[c],[h,l]=M(c,r,n,a);if(a.isComponent)v(h,a==null?void 0:a.props),b(h,a.children);else{const y=a;h.textContent!==y&&(h.textContent=y)}l!=="complete"&&e.appendChild(h),l!=="new"&&n.push(h)}for(let c=0;c<r.length;c++){const a=r[c];n.includes(a)||(f=a==null?void 0:a.parentElement)==null||f.removeChild(a)}}let L="wc";function U(e){L=e}function z(e){return[].map.call(e,(t,r)=>r&&t===t.toUpperCase()?`-${t.toLowerCase()}`:t.toLowerCase()).join("")}function B(e,t=0){for(;e.childNodes[t];)e.removeChild(e.childNodes[t])}class A extends HTMLElement{constructor(){super();p(this,"_context",{});p(this,"_timestamp",null);k(this,d,!1);var c,a;const t=this.constructor;this._context=Object.keys(t.properties).reduce((h,l)=>{const y=t.properties[l].attribute,E=t.properties[l].value,I=t.properties[l].format||function(K){return K},J=this.getAttribute(l);return w(j({},h),{[l]:y?I(J):E!=null?E:null})},{});const r=this.getElementSeed(),n=(c=r.children)==null?void 0:c[0];(n==null?void 0:n.type)==="shadow"?this.attachShadow({mode:((a=n==null?void 0:n.props)==null?void 0:a.mode)||"open"}):B(this),this.doRender(r,!1)}static get tag(){return`${L}-${z(this.name)}`}static get observedAttributes(){return Object.keys(this.properties).filter(t=>{var r;return((r=this.properties[t])==null?void 0:r.attribute)===!0})}render(t){throw console.log(t),Error("implement me")}getElementSeed(){return this.render(this._context)}doRender(t,r=!0){if(t.type!=="host")throw Error('Root tag in render must be "host"');r&&v(this,t.props),this.shadowRoot?(H(this.shadowRoot,t.children[0].props),b(this.shadowRoot||this,t.children[0].children)):b(this,t.children)}connectedCallback(){F(this,d,!0),this.updateContext()}attributeChangedCallback(t,r,n){var h;const f=((h=this.constructor.properties)==null?void 0:h[t].format)||function(l){return l},c=this._context[t],a=f(n);a!==c&&this.updateContext({[t]:a})}processContext(t){t=typeof t=="function"?t(this._context):t,Object.assign(this._context,t)}updateContext(t={}){this.processContext(t);const r=this.getElementSeed(),n=new Date;this._timestamp=n,P(this,d)&&window.requestAnimationFrame(()=>{n===this._timestamp&&this.doRender(r)})}static register(){customElements.get(this.tag)||(customElements.define(this.tag,this),console.log("[WComponent][register]",this.tag))}}d=new WeakMap,p(A,"shadow",null),p(A,"properties",{}),i.Fragment=o,i.default=A,i.jsx=s,i.jsxFrag=o,i.jsxs=s,i.render=b,i.setWCPredicate=U,Object.defineProperty(i,"__esModule",{value:!0}),i[Symbol.toStringTag]="Module"});
